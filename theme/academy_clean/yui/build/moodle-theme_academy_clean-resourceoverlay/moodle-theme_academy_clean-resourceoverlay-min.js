YUI.add("moodle-theme_academy_clean-resourceoverlay",function(e,t){function f(e){if(e.getAttribute("onclick").length>2){var t=e.getAttribute("onclick");e.removeAttribute("onclick"),e.setAttribute("params",t),e.append("&nbspPOPUP")}}function l(e){return e.hasAttribute("params")&&e.test(r)?!0:!1}function c(e,t){var n,r;return n=new RegExp(t+"=([0-9]+)","i"),r=e.match(n),r===null?null:r[1]}var n="Academy theme resource overlay",r=".activity.resource .activityinstance a",i="overlay",s="location",o=600,u=450,a;a=function(){a.superclass.constructor.apply(this,arguments)},e.extend(a,e.Base,{overlay:null,initializer:function(){var t=this,n=e.all(r).each(f);e.delegate("click",function(n){n.preventDefault();var r=n.target.getAttribute("params");o=c(r,"width"),u=c(r,"height"),s=this.getAttribute("href")+"&redirect=1";var a="",f=e.Node.create('<iframe class="'+i+'" width="'+o+'" height="'+u+'" src="'+s+'"></iframe>'),l=new M.core.dialogue({headerContent:a,bodyContent:f,lightbox:!0,width:o,height:"auto",centered:!0,modal:!0,draggable:!1,zindex:5,shim:!1,closeButtonTitle:this.get("closeButtonTitle"),hideOn:[{eventName:"clickoutside"}]});l.get("buttons").header[0].on("click",function(e){var t=!0;l.destroy(t)}),t.dialog=l,l.render(e.one(document.body))},e.one(document.body),l)}},{NAME:n,ATTRS:{name:{validator:e.Lang.isString,value:"resourceoverlay"},options:{getter:function(){return{width:this.get(o),height:this.get(u),location:this.get(s)}},readOnly:!0},width:{value:600},height:{value:450},location:{value:null}}}),M.theme_academy_clean=M.theme_academy_clean||{},M.theme_academy_clean.resourceoverlay={init:function(e){return new a(e)}}},"@VERSION@",{requires:["base","node","event-delegate","moodle-core-dialogue","moodle-core-notification"]});
