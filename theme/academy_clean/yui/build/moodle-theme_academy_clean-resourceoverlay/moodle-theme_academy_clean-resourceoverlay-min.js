YUI.add("moodle-theme_academy_clean-resourceoverlay",function(e,t){function u(e){e.getAttribute("onclick").length>2&&e.append("&nbspPOPUP")}function a(e){return e.getAttribute("onclick").length>2&&e.test(r)?!0:!1}function f(e,t){var n,r;return n=new RegExp(t+"=([0-9]+)","i"),r=e.match(n),r===null?null:r[1]}var n="Academy theme resource overlay",r=".activity.resource .activityinstance a, .activity.url .activityinstance a",i="overlay",s=12,o;o=function(){o.superclass.constructor.apply(this,arguments)},e.extend(o,e.Base,{overlay:null,initializer:function(){var t=this,n=e.all(r).each(u);e.delegate("mousedown",function(n){n.preventDefault(),n.stopPropagation();var r=this.getAttribute("onclick"),o=f(r,"width"),u=parseFloat(o)+parseFloat(s*2),a=f(r,"height"),l=this.getAttribute("href")+"&redirect=1",c="",h=e.Node.create('<iframe class="'+i+'" width="'+o+'" height="'+a+'" src="'+l+'" scrolling="no"></iframe>'),p=new M.core.dialogue({headerContent:c,bodyContent:h,lightbox:!0,width:u,height:"auto",centered:!0,modal:!0,draggable:!1,zindex:5,shim:!1,closeButtonTitle:this.get("closeButtonTitle")});p.get("buttons").header[0].on("click",function(e){var t=!0;p.destroy(t)}),p.get("maskNode").on("click",function(e){setTimeout(function(){p.destroy()},50)}),t.dialog=p,p.render(e.one(document.body))},e.one("#page"),a)}},{NAME:n,ATTRS:{name:{validator:e.Lang.isString,value:"resourceoverlay"}}}),M.theme_academy_clean=M.theme_academy_clean||{},M.theme_academy_clean.resourceoverlay={init:function(e){return new o(e)}}},"@VERSION@",{requires:["base","node","event-delegate","moodle-core-dialogue","moodle-core-notification"]});
